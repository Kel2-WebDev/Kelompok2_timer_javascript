<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Timer</title>
  </head>
  <body>
    <p id="main-timer">0</p>

    <button id="pause-button" onclick="pause()" hidden>Paused</button>
    <button id="start-button" onclick="start()">Start</button>
    <button id="stop-button" onclick="stop()">Stop</button>

    <script src="timer.js"></script>
  </body>

  <script>
    let state = "stopped";
    let sec = 0;
    let interval;

    setTime(sec);

    // TODO : Format seconds to HH:MM:SS
    function setTime(sec) {
      let curr_time = new Date(null).setSeconds(sec).toLocaleString();

      document.getElementById("main-timer").innerText = curr_time;
    }

    function timerEvent() {
      sec += 1;

      setTime(sec);
    }

    function stop() {
      clearInterval(interval);
      sec = 0;
      state = "stopped";

      document.getElementById("pause-button").hidden = true;
      document.getElementById("start-button").hidden = false;

      setTime(sec);
    }

    function pause() {
      clearInterval(interval);
      state = "paused";

      document.getElementById("pause-button").hidden = true;
      document.getElementById("start-button").hidden = false;
    }

    function start() {
      if (state != "started") {
        interval = setInterval(timerEvent, 1000);
        state = "started";

        document.getElementById("pause-button").hidden = false;
        document.getElementById("start-button").hidden = true;
      }
    }
  </script>
</html>
